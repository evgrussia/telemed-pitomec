---
title: "ADR-002: Стратегия деплоя ИИ-моделей"
created_by: "Architect Agent"
created_at: "2026-01-28"
---

# ADR-002: Стратегия деплоя ИИ-моделей

## Status
Принято (Accepted)

## Context
Функционал ИИ-диагностики (FR-002) требует обработки изображений с помощью моделей компьютерного зрения. Необходимо выбрать между использованием готовых API (OpenAI Vision) и деплоем собственной модели на своих серверах.

## Decision
Выбран **Self-hosted деплой кастомной модели (на базе PyTorch/FastAPI) в Docker-контейнерах**.

### Альтернативы рассмотрены:
1. **Public API (например, OpenAI GPT-4o with Vision)**:
   - **Плюсы**: Не требует настройки серверов, высокое качество general-анализа.
   - **Минусы**: Высокая стоимость за запрос, риски конфиденциальности (передача мед. данных сторонней компании), отсутствие специализации на ветеринарии.
2. **Managed Inference (AWS Sagemaker / Google Vertex AI)**:
   - **Плюсы**: Удобное масштабирование.
   - **Минусы**: Высокая цена, привязка к облачному провайдеру.

## Rationale
1. **Специализация**: Ветеринарная диагностика требует дообучения (fine-tuning) моделей на специфических датасетах болезней животных. Собственная модель позволит достичь точности > 75% (KPI).
2. **Privacy**: Фотографии питомцев и медицинские данные остаются внутри контура компании, что важно для соответствия ФЗ-152.
3. **Latency**: Исключение задержек на передачу данных внешним провайдерам. Инференс < 10 сек (NFR).
4. **Cost**: При достижении объема > 1000 запросов в день, собственные GPU-инстансы становятся дешевле, чем оплата по токенам у OpenAI.

## Consequences

### Positive
- Полный контроль над качеством и точностью модели.
- Независимость от политики цен сторонних API.
- Возможность оптимизации веса модели для работы на дешевых GPU.

### Negative
- Необходимость управления GPU-инфраструктурой.
- Требуется MLOps-экспертиза для настройки пайплайна деплоя.

### Neutral
- Backend взаимодействует с ИИ через REST/gRPC API внутри приватной сети.

---
*Документ создан: Architect Agent | Дата: 2026-01-28*
